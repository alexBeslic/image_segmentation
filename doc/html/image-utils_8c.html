<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Image segmentation: src/image-utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="test.bmp"/></td>
  <td id="projectalign">
   <div id="projectname">Image segmentation<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Image segmentation using the edge detection algorithm on the ADSP-21489 development platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">image-utils.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Image utility functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="image-utils_8h_source.html">image-utils.h</a>&quot;</code><br />
</div>
<p><a href="image-utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a71b65010c919b9fd61b32242593f3761"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a71b65010c919b9fd61b32242593f3761">read_image</a> (char *fileName, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image)</td></tr>
<tr class="memdesc:a71b65010c919b9fd61b32242593f3761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an .bmp format image and puts it to image variable.  <br /></td></tr>
<tr class="separator:a71b65010c919b9fd61b32242593f3761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa8882ca4c1981931b8b4464c187cb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a8aa8882ca4c1981931b8b4464c187cb8">prep_for_writing</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *input, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *output)</td></tr>
<tr class="memdesc:a8aa8882ca4c1981931b8b4464c187cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preps an image for writing.  <br /></td></tr>
<tr class="separator:a8aa8882ca4c1981931b8b4464c187cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc54dfcab9444670f7bb09303c8fe6c5"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#abc54dfcab9444670f7bb09303c8fe6c5">get_bytes_to_read</a> (unsigned char array[4])</td></tr>
<tr class="memdesc:abc54dfcab9444670f7bb09303c8fe6c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a 4 element array to a singel 4B value.  <br /></td></tr>
<tr class="separator:abc54dfcab9444670f7bb09303c8fe6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a996ba27094be9e799f643fa79b21542d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a> (unsigned char array[4], unsigned int whatTowrite)</td></tr>
<tr class="memdesc:a996ba27094be9e799f643fa79b21542d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a 4B value to an array of 4 elements.  <br /></td></tr>
<tr class="separator:a996ba27094be9e799f643fa79b21542d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b01a03a98890cde4a25eae51095cc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#ab1b01a03a98890cde4a25eae51095cc5">write_image</a> (char *fileName, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image)</td></tr>
<tr class="memdesc:ab1b01a03a98890cde4a25eae51095cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the image in a .bmp format.  <br /></td></tr>
<tr class="separator:ab1b01a03a98890cde4a25eae51095cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af135e1431c0a191681c41197210cc8ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#af135e1431c0a191681c41197210cc8ae">convert_to_grayscale</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *originalImage, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *grayscaleImage)</td></tr>
<tr class="memdesc:af135e1431c0a191681c41197210cc8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the image to gray scale using Luminosity Method.  <br /></td></tr>
<tr class="separator:af135e1431c0a191681c41197210cc8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4285e09c30c3d757c74acd69410bd5fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a4285e09c30c3d757c74acd69410bd5fb">edge_detection</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *input, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *output, char *kernel, unsigned int k_row, unsigned int k_col)</td></tr>
<tr class="memdesc:a4285e09c30c3d757c74acd69410bd5fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for edge detection using 2D convolution method. Note: It can be used for other operation not just edge detection, it only depends on what kernel is providet.  <br /></td></tr>
<tr class="separator:a4285e09c30c3d757c74acd69410bd5fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f54c39e61cc3f188ec5b3ada7632e85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a2f54c39e61cc3f188ec5b3ada7632e85">color_pixel</a> (unsigned char *pixels, unsigned int color_index)</td></tr>
<tr class="memdesc:a2f54c39e61cc3f188ec5b3ada7632e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Colors one pixel by with color detriment by color index.  <br /></td></tr>
<tr class="separator:a2f54c39e61cc3f188ec5b3ada7632e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26338f8e90d17d00f531c22cac0f2a92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a26338f8e90d17d00f531c22cac0f2a92">color_segments</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *input, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *output)</td></tr>
<tr class="memdesc:a26338f8e90d17d00f531c22cac0f2a92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Color an image based on the code in that pixel.  <br /></td></tr>
<tr class="separator:a26338f8e90d17d00f531c22cac0f2a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c3902d5e609ce53f3884056184aba89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a0c3902d5e609ce53f3884056184aba89">code_segments</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image, unsigned char *codes, int *queue[2])</td></tr>
<tr class="memdesc:a0c3902d5e609ce53f3884056184aba89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Codes an image, every closed contour gets its own code. Codes are in range of NUM_COLORS.  <br /></td></tr>
<tr class="separator:a0c3902d5e609ce53f3884056184aba89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c2a8e73ff43cc557dd3823f310f339"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a13c2a8e73ff43cc557dd3823f310f339">flood_fill</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image, unsigned int x, unsigned int y, unsigned int color, unsigned char *codes, int *queue[2])</td></tr>
<tr class="memdesc:a13c2a8e73ff43cc557dd3823f310f339"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses BFS algoritam to give each pixel in a closed contour unique color code.  <br /></td></tr>
<tr class="separator:a13c2a8e73ff43cc557dd3823f310f339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee8d1cc8531e00c7a15cdd9e0203fbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#acee8d1cc8531e00c7a15cdd9e0203fbe">convert_to_grayscale_dsp</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *originalImage, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *grayscaleImage)</td></tr>
<tr class="memdesc:acee8d1cc8531e00c7a15cdd9e0203fbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the image to gray scale using average method Optimized version.  <br /></td></tr>
<tr class="separator:acee8d1cc8531e00c7a15cdd9e0203fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85c443782db73f2edcf7b8150307ceb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#ab85c443782db73f2edcf7b8150307ceb">edge_detection_dsp</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *input, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *output, char *restrict kernel, unsigned int k_row, unsigned int k_col)</td></tr>
<tr class="memdesc:ab85c443782db73f2edcf7b8150307ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for edge detection using 2D convolution method Note: It can be used for other operation not just edge detection, it only depends on what kernel is providet. Optimized version.  <br /></td></tr>
<tr class="separator:ab85c443782db73f2edcf7b8150307ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09305e985b71cc1c8301c01f49a91cf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a09305e985b71cc1c8301c01f49a91cf6">color_segments_dsp</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *input, <a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *output)</td></tr>
<tr class="memdesc:a09305e985b71cc1c8301c01f49a91cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Color an image based on the code in that pixel Optimized version.  <br /></td></tr>
<tr class="separator:a09305e985b71cc1c8301c01f49a91cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5845eb3e6ff0bace183a1f6ce57d67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#afe5845eb3e6ff0bace183a1f6ce57d67">code_segments_dsp</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image, unsigned char *restrict codes, int *queue[2])</td></tr>
<tr class="memdesc:afe5845eb3e6ff0bace183a1f6ce57d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Codes an image, every closed contour gets its own code. Codes are in range of NUM_COLORS. Optimized version.  <br /></td></tr>
<tr class="separator:afe5845eb3e6ff0bace183a1f6ce57d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c40d30df6e3c879ceddd136452c303"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image-utils_8c.html#a70c40d30df6e3c879ceddd136452c303">flood_fill_dsp</a> (<a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *image, unsigned int x, unsigned int y, unsigned int color, unsigned char *restrict codes, int *queue[2])</td></tr>
<tr class="memdesc:a70c40d30df6e3c879ceddd136452c303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses BFS algoritam to give each pixel in a closed contour unique color code Optimized version.  <br /></td></tr>
<tr class="separator:a70c40d30df6e3c879ceddd136452c303"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Image utility functions. </p>
<dl class="section author"><dt>Author</dt><dd>Aleksandar Beslic (<a href="#" onclick="location.href='mai'+'lto:'+'bes'+'li'+'c.a'+'le'+'x@g'+'ma'+'il.'+'co'+'m'; return false;">besli<span class="obfuscator">.nosp@m.</span>c.al<span class="obfuscator">.nosp@m.</span>ex@gm<span class="obfuscator">.nosp@m.</span>ail.<span class="obfuscator">.nosp@m.</span>com</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-03</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>

<p class="definition">Definition in file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0c3902d5e609ce53f3884056184aba89" name="a0c3902d5e609ce53f3884056184aba89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c3902d5e609ce53f3884056184aba89">&#9670;&#160;</a></span>code_segments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void code_segments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>codes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>queue</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Codes an image, every closed contour gets its own code. Codes are in range of NUM_COLORS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input </td></tr>
    <tr><td class="paramname">codes</td><td>helper array, (need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00395">395</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  396</span>{</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordtype">size_t</span> i, j;</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height = image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = width*height;</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> next_code = 1u;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; height; i++) </div>
<div class="line"><span class="lineno">  404</span>    {</div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">for</span> (j = 0u; j &lt; width; j++) </div>
<div class="line"><span class="lineno">  406</span>        {</div>
<div class="line"><span class="lineno">  407</span>            <span class="comment">/* Check if the pixel is empty and if that pixel isn&#39;t already color  then calls flood fill function */</span></div>
<div class="line"><span class="lineno">  408</span>            <span class="keywordflow">if</span> ((image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i * width + j] == 0u) &amp;&amp; (codes[i * width + j] == 0u)) </div>
<div class="line"><span class="lineno">  409</span>            {</div>
<div class="line"><span class="lineno">  410</span>                <a class="code hl_function" href="image-utils_8c.html#a13c2a8e73ff43cc557dd3823f310f339">flood_fill</a>(image, j, i, next_code, codes, queue);</div>
<div class="line"><span class="lineno">  411</span>                next_code = (next_code + 1u) % <a class="code hl_define" href="image-utils_8h.html#a49286c80a7005e4f2faf8f2c54005a54">NUM_COLORS</a>;</div>
<div class="line"><span class="lineno">  412</span>            }</div>
<div class="line"><span class="lineno">  413</span>        }</div>
<div class="line"><span class="lineno">  414</span>    }</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    <span class="comment">/* Assign the color codes to the image */</span></div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; i++) </div>
<div class="line"><span class="lineno">  418</span>    {</div>
<div class="line"><span class="lineno">  419</span>        image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i] = codes[i];</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="line"><span class="lineno">  421</span>}</div>
<div class="ttc" id="aimage-utils_8c_html_a13c2a8e73ff43cc557dd3823f310f339"><div class="ttname"><a href="image-utils_8c.html#a13c2a8e73ff43cc557dd3823f310f339">flood_fill</a></div><div class="ttdeci">void flood_fill(IMAGE *image, unsigned int x, unsigned int y, unsigned int color, unsigned char *codes, int *queue[2])</div><div class="ttdoc">Uses BFS algoritam to give each pixel in a closed contour unique color code.</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8c_source.html#l00432">image-utils.c:432</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a49286c80a7005e4f2faf8f2c54005a54"><div class="ttname"><a href="image-utils_8h.html#a49286c80a7005e4f2faf8f2c54005a54">NUM_COLORS</a></div><div class="ttdeci">#define NUM_COLORS</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00031">image-utils.h:31</a></div></div>
<div class="ttc" id="astructimg_html_ab2e78c61905b4419fcc7b4cfc500fe85"><div class="ttname"><a href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">img::height</a></div><div class="ttdeci">unsigned int height</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00053">image-utils.h:53</a></div></div>
<div class="ttc" id="astructimg_html_abc151ccc17d59b9d84a700b3855d4df0"><div class="ttname"><a href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">img::pixels</a></div><div class="ttdeci">unsigned char * pixels</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00055">image-utils.h:55</a></div></div>
<div class="ttc" id="astructimg_html_aca34d28e3d8bcbcadb8edb4e3af24f8c"><div class="ttname"><a href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">img::width</a></div><div class="ttdeci">unsigned int width</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00052">image-utils.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe5845eb3e6ff0bace183a1f6ce57d67" name="afe5845eb3e6ff0bace183a1f6ce57d67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5845eb3e6ff0bace183a1f6ce57d67">&#9670;&#160;</a></span>code_segments_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void code_segments_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *restrict&#160;</td>
          <td class="paramname"><em>codes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>queue</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Codes an image, every closed contour gets its own code. Codes are in range of NUM_COLORS. Optimized version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input </td></tr>
    <tr><td class="paramname">codes</td><td>helper array, need to be preallocated with size =&gt; width * height </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00615">615</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  616</span>{</div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordtype">size_t</span> i, j;</div>
<div class="line"><span class="lineno">  618</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height = image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = width * height;</div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> next_code = 1u;</div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixels = image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span><span class="preprocessor">    #pragma vector_for</span></div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; height; i++) </div>
<div class="line"><span class="lineno">  626</span>    {</div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">for</span> (j = 0u; j &lt; width; j++) </div>
<div class="line"><span class="lineno">  628</span>        {</div>
<div class="line"><span class="lineno">  629</span>            <span class="comment">/* Check if the pixel is empty and if that pixel isn&#39;t already color  then calls flood fill function */</span></div>
<div class="line"><span class="lineno">  630</span>            <span class="keywordflow">if</span> (expected_true((pixels[i * width + j] == 0u) &amp;&amp; (codes[i * width + j] == 0u)))</div>
<div class="line"><span class="lineno">  631</span>            {</div>
<div class="line"><span class="lineno">  632</span>                <a class="code hl_function" href="image-utils_8c.html#a70c40d30df6e3c879ceddd136452c303">flood_fill_dsp</a>(image, j, i, next_code, codes, queue);</div>
<div class="line"><span class="lineno">  633</span>                next_code = (next_code + 1u) % <a class="code hl_define" href="image-utils_8h.html#a49286c80a7005e4f2faf8f2c54005a54">NUM_COLORS</a>;</div>
<div class="line"><span class="lineno">  634</span>            }</div>
<div class="line"><span class="lineno">  635</span>        }</div>
<div class="line"><span class="lineno">  636</span>    }</div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>    <span class="comment">/* Assign the color codes to the image */</span></div>
<div class="line"><span class="lineno">  639</span><span class="preprocessor">    #pragma SIMD_for</span></div>
<div class="line"><span class="lineno">  640</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; i++) </div>
<div class="line"><span class="lineno">  641</span>    {</div>
<div class="line"><span class="lineno">  642</span>        pixels[i] = codes[i];</div>
<div class="line"><span class="lineno">  643</span>    }</div>
<div class="line"><span class="lineno">  644</span>}</div>
<div class="ttc" id="aimage-utils_8c_html_a70c40d30df6e3c879ceddd136452c303"><div class="ttname"><a href="image-utils_8c.html#a70c40d30df6e3c879ceddd136452c303">flood_fill_dsp</a></div><div class="ttdeci">void flood_fill_dsp(IMAGE *image, unsigned int x, unsigned int y, unsigned int color, unsigned char *restrict codes, int *queue[2])</div><div class="ttdoc">Uses BFS algoritam to give each pixel in a closed contour unique color code Optimized version.</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8c_source.html#l00657">image-utils.c:657</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f54c39e61cc3f188ec5b3ada7632e85" name="a2f54c39e61cc3f188ec5b3ada7632e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f54c39e61cc3f188ec5b3ada7632e85">&#9670;&#160;</a></span>color_pixel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void color_pixel </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pixels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>color_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Colors one pixel by with color detriment by color index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>to be colored </td></tr>
    <tr><td class="paramname">color_index</td><td>in range of NUM_COLORS </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00345">345</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span>{</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors[] = {<a class="code hl_define" href="image-utils_8h.html#a676619736889a273fce9b18d7ccac048">COLOR_1</a>, <a class="code hl_define" href="image-utils_8h.html#af50df7682bfb42fb3fdc05dda5f672bd">COLOR_2</a>, <a class="code hl_define" href="image-utils_8h.html#a400aa90eafe2d8877408bd48ffff7d59">COLOR_3</a>, <a class="code hl_define" href="image-utils_8h.html#a628e4a42e914c7ecc3e0e8da7a8d6a43">COLOR_4</a>,</div>
<div class="line"><span class="lineno">  348</span>                            <a class="code hl_define" href="image-utils_8h.html#a19e93b1b5f86fec1bd4aa0426e0a543d">COLOR_5</a>, <a class="code hl_define" href="image-utils_8h.html#a345cffa502a59abfe12cf776dd9d11fa">COLOR_6</a>, <a class="code hl_define" href="image-utils_8h.html#a54af7554bdd424e5adf70a40747cb867">COLOR_7</a>, <a class="code hl_define" href="image-utils_8h.html#a8da468472b97f818a9951be11ef8c9fd">COLOR_8</a>,</div>
<div class="line"><span class="lineno">  349</span>                            <a class="code hl_define" href="image-utils_8h.html#aff1d05cb2a0f78bb204a308d58e553bb">COLOR_9</a>, <a class="code hl_define" href="image-utils_8h.html#a75c80f3f02b9b0927a8d015aebb7af10">COLOR_10</a>};</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>     <span class="comment">/* Setting RGB values */</span></div>
<div class="line"><span class="lineno">  352</span>    pixels[0] = <a class="code hl_define" href="image-utils_8h.html#a55c96985dff090b04400dd6d15eb4862">C_MASK_B</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  353</span>    pixels[1] = <a class="code hl_define" href="image-utils_8h.html#a5ffcf7cba5025d4ef682ae6fbb8eef39">C_MASK_G</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  354</span>    pixels[2] = <a class="code hl_define" href="image-utils_8h.html#ab3e14682ca9fa9b4e165f177fa81ab9e">C_MASK_R</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  355</span>}</div>
<div class="ttc" id="aimage-utils_8h_html_a19e93b1b5f86fec1bd4aa0426e0a543d"><div class="ttname"><a href="image-utils_8h.html#a19e93b1b5f86fec1bd4aa0426e0a543d">COLOR_5</a></div><div class="ttdeci">#define COLOR_5</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00036">image-utils.h:36</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a345cffa502a59abfe12cf776dd9d11fa"><div class="ttname"><a href="image-utils_8h.html#a345cffa502a59abfe12cf776dd9d11fa">COLOR_6</a></div><div class="ttdeci">#define COLOR_6</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00037">image-utils.h:37</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a400aa90eafe2d8877408bd48ffff7d59"><div class="ttname"><a href="image-utils_8h.html#a400aa90eafe2d8877408bd48ffff7d59">COLOR_3</a></div><div class="ttdeci">#define COLOR_3</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00034">image-utils.h:34</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a54af7554bdd424e5adf70a40747cb867"><div class="ttname"><a href="image-utils_8h.html#a54af7554bdd424e5adf70a40747cb867">COLOR_7</a></div><div class="ttdeci">#define COLOR_7</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00038">image-utils.h:38</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a55c96985dff090b04400dd6d15eb4862"><div class="ttname"><a href="image-utils_8h.html#a55c96985dff090b04400dd6d15eb4862">C_MASK_B</a></div><div class="ttdeci">#define C_MASK_B(COLOR)</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00046">image-utils.h:46</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a5ffcf7cba5025d4ef682ae6fbb8eef39"><div class="ttname"><a href="image-utils_8h.html#a5ffcf7cba5025d4ef682ae6fbb8eef39">C_MASK_G</a></div><div class="ttdeci">#define C_MASK_G(COLOR)</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00045">image-utils.h:45</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a628e4a42e914c7ecc3e0e8da7a8d6a43"><div class="ttname"><a href="image-utils_8h.html#a628e4a42e914c7ecc3e0e8da7a8d6a43">COLOR_4</a></div><div class="ttdeci">#define COLOR_4</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00035">image-utils.h:35</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a676619736889a273fce9b18d7ccac048"><div class="ttname"><a href="image-utils_8h.html#a676619736889a273fce9b18d7ccac048">COLOR_1</a></div><div class="ttdeci">#define COLOR_1</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00032">image-utils.h:32</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a75c80f3f02b9b0927a8d015aebb7af10"><div class="ttname"><a href="image-utils_8h.html#a75c80f3f02b9b0927a8d015aebb7af10">COLOR_10</a></div><div class="ttdeci">#define COLOR_10</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00041">image-utils.h:41</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a8da468472b97f818a9951be11ef8c9fd"><div class="ttname"><a href="image-utils_8h.html#a8da468472b97f818a9951be11ef8c9fd">COLOR_8</a></div><div class="ttdeci">#define COLOR_8</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00039">image-utils.h:39</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_ab3e14682ca9fa9b4e165f177fa81ab9e"><div class="ttname"><a href="image-utils_8h.html#ab3e14682ca9fa9b4e165f177fa81ab9e">C_MASK_R</a></div><div class="ttdeci">#define C_MASK_R(COLOR)</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00044">image-utils.h:44</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_af50df7682bfb42fb3fdc05dda5f672bd"><div class="ttname"><a href="image-utils_8h.html#af50df7682bfb42fb3fdc05dda5f672bd">COLOR_2</a></div><div class="ttdeci">#define COLOR_2</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00033">image-utils.h:33</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_aff1d05cb2a0f78bb204a308d58e553bb"><div class="ttname"><a href="image-utils_8h.html#aff1d05cb2a0f78bb204a308d58e553bb">COLOR_9</a></div><div class="ttdeci">#define COLOR_9</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00040">image-utils.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26338f8e90d17d00f531c22cac0f2a92" name="a26338f8e90d17d00f531c22cac0f2a92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26338f8e90d17d00f531c22cac0f2a92">&#9670;&#160;</a></span>color_segments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void color_segments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Color an image based on the code in that pixel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>image that has been already codet </td></tr>
    <tr><td class="paramname">output</td><td>image (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00363">363</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  364</span>{</div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> * input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color_index = 0u;</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onePixel = output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  371</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  372</span>    output-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  373</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 3u;</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    <span class="comment">/* Colors each pixel*/</span></div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; i++)</div>
<div class="line"><span class="lineno">  377</span>    {</div>
<div class="line"><span class="lineno">  378</span>        color_index = input-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i];</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> (color_index &lt; <a class="code hl_define" href="image-utils_8h.html#a49286c80a7005e4f2faf8f2c54005a54">NUM_COLORS</a>)</div>
<div class="line"><span class="lineno">  381</span>        {</div>
<div class="line"><span class="lineno">  382</span>             <span class="comment">/* -1 because color_index starts from 1 but the color_pixel function start indexing from 0 */</span> </div>
<div class="line"><span class="lineno">  383</span>            <a class="code hl_function" href="image-utils_8c.html#a2f54c39e61cc3f188ec5b3ada7632e85">color_pixel</a>(&amp;output-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i * onePixel], color_index - 1u);</div>
<div class="line"><span class="lineno">  384</span>        }</div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span>}</div>
<div class="ttc" id="aimage-utils_8c_html_a2f54c39e61cc3f188ec5b3ada7632e85"><div class="ttname"><a href="image-utils_8c.html#a2f54c39e61cc3f188ec5b3ada7632e85">color_pixel</a></div><div class="ttdeci">void color_pixel(unsigned char *pixels, unsigned int color_index)</div><div class="ttdoc">Colors one pixel by with color detriment by color index.</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8c_source.html#l00345">image-utils.c:345</a></div></div>
<div class="ttc" id="astructimg_html_ad7ce9c2bd24f9bdd12dd7b4219c53e37"><div class="ttname"><a href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">img::bytesPerPixel</a></div><div class="ttdeci">unsigned int bytesPerPixel</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00054">image-utils.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09305e985b71cc1c8301c01f49a91cf6" name="a09305e985b71cc1c8301c01f49a91cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09305e985b71cc1c8301c01f49a91cf6">&#9670;&#160;</a></span>color_segments_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void color_segments_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Color an image based on the code in that pixel Optimized version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>image that has been already coded </td></tr>
    <tr><td class="paramname">output</td><td>image (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00573">573</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  574</span>{</div>
<div class="line"><span class="lineno">  575</span>    <span class="comment">/* Array of colors */</span></div>
<div class="line"><span class="lineno">  576</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors[] = {<a class="code hl_define" href="image-utils_8h.html#a676619736889a273fce9b18d7ccac048">COLOR_1</a>, <a class="code hl_define" href="image-utils_8h.html#af50df7682bfb42fb3fdc05dda5f672bd">COLOR_2</a>, <a class="code hl_define" href="image-utils_8h.html#a400aa90eafe2d8877408bd48ffff7d59">COLOR_3</a>, <a class="code hl_define" href="image-utils_8h.html#a628e4a42e914c7ecc3e0e8da7a8d6a43">COLOR_4</a>,</div>
<div class="line"><span class="lineno">  577</span>                                <a class="code hl_define" href="image-utils_8h.html#a19e93b1b5f86fec1bd4aa0426e0a543d">COLOR_5</a>, <a class="code hl_define" href="image-utils_8h.html#a345cffa502a59abfe12cf776dd9d11fa">COLOR_6</a>, <a class="code hl_define" href="image-utils_8h.html#a54af7554bdd424e5adf70a40747cb867">COLOR_7</a>, <a class="code hl_define" href="image-utils_8h.html#a8da468472b97f818a9951be11ef8c9fd">COLOR_8</a>,</div>
<div class="line"><span class="lineno">  578</span>                                <a class="code hl_define" href="image-utils_8h.html#aff1d05cb2a0f78bb204a308d58e553bb">COLOR_9</a>, <a class="code hl_define" href="image-utils_8h.html#a75c80f3f02b9b0927a8d015aebb7af10">COLOR_10</a>};</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordtype">size_t</span> i,ii;</div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> * input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  581</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color_index = 0u;</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onePixel = output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict codes = input-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  584</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixels = output-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  587</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  588</span>    output-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  589</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 3u;</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>    <span class="comment">/* Coloring each pixel */</span></div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; i++)</div>
<div class="line"><span class="lineno">  593</span>    {</div>
<div class="line"><span class="lineno">  594</span>        color_index = codes[i];</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>        <span class="keywordflow">if</span> (expected_true(color_index &lt; <a class="code hl_define" href="image-utils_8h.html#a49286c80a7005e4f2faf8f2c54005a54">NUM_COLORS</a>))</div>
<div class="line"><span class="lineno">  597</span>        {</div>
<div class="line"><span class="lineno">  598</span>            <span class="comment">/* Setting RGB values */</span></div>
<div class="line"><span class="lineno">  599</span>            pixels[i * onePixel]      = <a class="code hl_define" href="image-utils_8h.html#a55c96985dff090b04400dd6d15eb4862">C_MASK_B</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  600</span>            pixels[i * onePixel + 1u] = <a class="code hl_define" href="image-utils_8h.html#a5ffcf7cba5025d4ef682ae6fbb8eef39">C_MASK_G</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  601</span>            pixels[i * onePixel + 2u] = <a class="code hl_define" href="image-utils_8h.html#ab3e14682ca9fa9b4e165f177fa81ab9e">C_MASK_R</a>(colors[color_index]);</div>
<div class="line"><span class="lineno">  602</span>        }</div>
<div class="line"><span class="lineno">  603</span>    }</div>
<div class="line"><span class="lineno">  604</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af135e1431c0a191681c41197210cc8ae" name="af135e1431c0a191681c41197210cc8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af135e1431c0a191681c41197210cc8ae">&#9670;&#160;</a></span>convert_to_grayscale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_to_grayscale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>originalImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>grayscaleImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the image to gray scale using Luminosity Method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">originalImage</td><td>input image </td></tr>
    <tr><td class="paramname">grayscaleImage</td><td>output image (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00267">267</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  268</span>{</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordtype">size_t</span> i = 0u;</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size =  originalImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> * originalImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onePixel = originalImage-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  274</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = originalImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  275</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = originalImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  276</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 1u;</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="comment">/* Converting a pixel to gray scale */</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; ++i)</div>
<div class="line"><span class="lineno">  280</span>    {</div>
<div class="line"><span class="lineno">  281</span>        <span class="comment">/* Grayscale conversiony 0.11*B + 0.59*G + 0.3*R */</span></div>
<div class="line"><span class="lineno">  282</span>        grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i] = (<span class="keywordtype">unsigned</span> char) (0.11f * originalImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i*onePixel] + 0.59f * originalImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i*onePixel + 1u] + 0.3f * originalImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i*onePixel + 2u]);</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acee8d1cc8531e00c7a15cdd9e0203fbe" name="acee8d1cc8531e00c7a15cdd9e0203fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee8d1cc8531e00c7a15cdd9e0203fbe">&#9670;&#160;</a></span>convert_to_grayscale_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_to_grayscale_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>originalImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>grayscaleImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the image to gray scale using average method Optimized version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">originalImage</td><td>input image </td></tr>
    <tr><td class="paramname">grayscaleImage</td><td>output image (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00478">478</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  479</span>{</div>
<div class="line"><span class="lineno">  480</span>    <span class="keywordtype">size_t</span> i = 0u;</div>
<div class="line"><span class="lineno">  481</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> R;</div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> G;</div>
<div class="line"><span class="lineno">  483</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> B;</div>
<div class="line"><span class="lineno">  484</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imageSize =  originalImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> * originalImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onePixel = originalImage-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixels = originalImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict gray_pixels = grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  490</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = originalImage-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  491</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = originalImage-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  492</span>    grayscaleImage-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 1u;</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>    <span class="comment">/* Converting a pixel to gray scale */</span></div>
<div class="line"><span class="lineno">  495</span><span class="preprocessor">    #pragma no_vectorization</span></div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; imageSize; ++i)</div>
<div class="line"><span class="lineno">  497</span>    {</div>
<div class="line"><span class="lineno">  498</span>        B = pixels[i * onePixel];</div>
<div class="line"><span class="lineno">  499</span>        G = pixels[i * onePixel + 1u];</div>
<div class="line"><span class="lineno">  500</span>        R = pixels[i * onePixel + 2u];</div>
<div class="line"><span class="lineno">  501</span>        gray_pixels[i] = (R + G + B) / 3u;</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>    }</div>
<div class="line"><span class="lineno">  504</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4285e09c30c3d757c74acd69410bd5fb" name="a4285e09c30c3d757c74acd69410bd5fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4285e09c30c3d757c74acd69410bd5fb">&#9670;&#160;</a></span>edge_detection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void edge_detection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>kernel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>k_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>k_col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used for edge detection using 2D convolution method. Note: It can be used for other operation not just edge detection, it only depends on what kernel is providet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Image </td></tr>
    <tr><td class="paramname">output</td><td>Image (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
    <tr><td class="paramname">kernel</td><td>array </td></tr>
    <tr><td class="paramname">k_row</td><td>number of rows in the kernel </td></tr>
    <tr><td class="paramname">k_col</td><td>number of columns in the kernel </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00298">298</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  299</span>{</div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordtype">size_t</span> i, j, n, m;</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mm, nn, ii, jj;</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> column = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> row = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> centerX = k_col / 2u;</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> centerY = k_row / 2u;</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  308</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  309</span>    output-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  310</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 1u;</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">for</span>(i = 0u; i &lt; row; ++i)</div>
<div class="line"><span class="lineno">  313</span>    {</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">for</span>(j = 0u; j &lt; column; ++j)</div>
<div class="line"><span class="lineno">  315</span>        {</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordflow">for</span>(m = 0u; m &lt; k_row; ++m)</div>
<div class="line"><span class="lineno">  317</span>            {</div>
<div class="line"><span class="lineno">  318</span>                mm = k_row - 1u - m;  <span class="comment">/* row index of flipped kernel */</span></div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">for</span>(n = 0u; n &lt; k_col; ++n)</div>
<div class="line"><span class="lineno">  321</span>                {</div>
<div class="line"><span class="lineno">  322</span>                    nn = k_col - 1u - n;  <span class="comment">/* column index of flipped kernel */</span></div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>                    <span class="comment">/* index of input signal, used for checking boundary */</span></div>
<div class="line"><span class="lineno">  325</span>                    ii = i + (centerY - mm);</div>
<div class="line"><span class="lineno">  326</span>                    jj = j + (centerX - nn);</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>                    <span class="comment">/* ignore input samples which are out of bound */</span></div>
<div class="line"><span class="lineno">  329</span>                    <span class="keywordflow">if</span>((ii &lt; row) &amp;&amp; (jj &lt; column))</div>
<div class="line"><span class="lineno">  330</span>                    {</div>
<div class="line"><span class="lineno">  331</span>                        output-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[i*column + j] += input-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[ii * column + jj] * kernel[mm * k_col + nn];</div>
<div class="line"><span class="lineno">  332</span>                    }</div>
<div class="line"><span class="lineno">  333</span>                }</div>
<div class="line"><span class="lineno">  334</span>            }</div>
<div class="line"><span class="lineno">  335</span>        }</div>
<div class="line"><span class="lineno">  336</span>    }</div>
<div class="line"><span class="lineno">  337</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab85c443782db73f2edcf7b8150307ceb" name="ab85c443782db73f2edcf7b8150307ceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85c443782db73f2edcf7b8150307ceb">&#9670;&#160;</a></span>edge_detection_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void edge_detection_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *restrict&#160;</td>
          <td class="paramname"><em>kernel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>k_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>k_col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used for edge detection using 2D convolution method Note: It can be used for other operation not just edge detection, it only depends on what kernel is providet. Optimized version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Image </td></tr>
    <tr><td class="paramname">output</td><td>Image (pixel array needs to be preallocated with size =&gt; width * height) </td></tr>
    <tr><td class="paramname">kernel</td><td>array </td></tr>
    <tr><td class="paramname">k_row</td><td>number of rows in the kernel </td></tr>
    <tr><td class="paramname">k_col</td><td>number of columns in the kernel </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00520">520</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  521</span>{</div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordtype">size_t</span> i, j, n, m;</div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mm, nn, ii, jj;</div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> column = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> row = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> centerX = k_col / 2u;</div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> centerY = k_row / 2u;</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixelsI = input-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixelsO = output-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  532</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  533</span>    output-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  534</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = 1u;</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span><span class="preprocessor">    #pragma vector_for</span></div>
<div class="line"><span class="lineno">  537</span>    <span class="keywordflow">for</span>(m = 0u; m &lt; k_row; ++m)</div>
<div class="line"><span class="lineno">  538</span>    {</div>
<div class="line"><span class="lineno">  539</span>        mm = k_row - 1u - m; <span class="comment">/* row index of flipped kernel */</span></div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span><span class="preprocessor">        #pragma vector_for</span></div>
<div class="line"><span class="lineno">  542</span>        <span class="keywordflow">for</span>(n = 0u; n &lt; k_col; ++n)</div>
<div class="line"><span class="lineno">  543</span>        {</div>
<div class="line"><span class="lineno">  544</span>            nn = k_col - 1u - n;  <span class="comment">/* column index of flipped kernel */</span></div>
<div class="line"><span class="lineno">  545</span>            <span class="keywordflow">for</span>(i = 0u; i &lt; row; ++i)</div>
<div class="line"><span class="lineno">  546</span>            {</div>
<div class="line"><span class="lineno">  547</span>                <span class="keywordflow">for</span>(j = 0u; j &lt; column; ++j)</div>
<div class="line"><span class="lineno">  548</span>                {</div>
<div class="line"><span class="lineno">  549</span>                    <span class="comment">/* index of input signal, used for checking boundary */</span></div>
<div class="line"><span class="lineno">  550</span>                    ii = i + (centerY - mm);</div>
<div class="line"><span class="lineno">  551</span>                    jj = j + (centerX - nn);</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>                    <span class="comment">/* ignore input samples which are out of bound */</span></div>
<div class="line"><span class="lineno">  554</span>                    <span class="keywordflow">if</span>(expected_true((ii &lt; row) &amp;&amp; (jj &lt; column)))</div>
<div class="line"><span class="lineno">  555</span>                    {</div>
<div class="line"><span class="lineno">  556</span>                        pixelsO[i*column + j] += pixelsI[ii * column + jj] * kernel[mm * k_col + nn];</div>
<div class="line"><span class="lineno">  557</span>                    }</div>
<div class="line"><span class="lineno">  558</span>                }</div>
<div class="line"><span class="lineno">  559</span>            }</div>
<div class="line"><span class="lineno">  560</span>        }</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a13c2a8e73ff43cc557dd3823f310f339" name="a13c2a8e73ff43cc557dd3823f310f339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c2a8e73ff43cc557dd3823f310f339">&#9670;&#160;</a></span>flood_fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flood_fill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>codes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>queue</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses BFS algoritam to give each pixel in a closed contour unique color code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input </td></tr>
    <tr><td class="paramname">x</td><td>position in image </td></tr>
    <tr><td class="paramname">y</td><td>position in image </td></tr>
    <tr><td class="paramname">color</td><td>current color code </td></tr>
    <tr><td class="paramname">codes</td><td>array of previous codet pixels </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00432">432</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  433</span>{</div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordtype">int</span> i, j, xx, yy;</div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height = image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixels = image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordtype">int</span> front = 0;</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordtype">int</span> rear = 0;</div>
<div class="line"><span class="lineno">  440</span>    <span class="keywordtype">int</span> currentX;</div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordtype">int</span> currentY;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>    queue[0][rear] = x;</div>
<div class="line"><span class="lineno">  444</span>    queue[1][rear] = y;</div>
<div class="line"><span class="lineno">  445</span>    rear++;</div>
<div class="line"><span class="lineno">  446</span>    codes[y * width + x] = color;</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">while</span> (front != rear) {</div>
<div class="line"><span class="lineno">  449</span>        currentX = queue[0][front];</div>
<div class="line"><span class="lineno">  450</span>        currentY = queue[1][front];</div>
<div class="line"><span class="lineno">  451</span>        front++;</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordflow">for</span> (i = -1; i &lt;= 1; i++) {</div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordflow">for</span> (j = -1; j &lt;= 1; j++) {</div>
<div class="line"><span class="lineno">  454</span>                xx = currentX + i;</div>
<div class="line"><span class="lineno">  455</span>                yy = currentY + j;</div>
<div class="line"><span class="lineno">  456</span>                <span class="keywordflow">if</span> (((xx &lt; 0) || (xx &gt;= width)) || ((yy &lt; 0) || (yy &gt;= height))) {</div>
<div class="line"><span class="lineno">  457</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  458</span>                }</div>
<div class="line"><span class="lineno">  459</span>                <span class="keywordflow">if</span> ((pixels[yy * width + xx] == 0u) &amp;&amp; (codes[yy * width + xx] == 0u)) {</div>
<div class="line"><span class="lineno">  460</span>                    codes[yy * width + xx] = color;</div>
<div class="line"><span class="lineno">  461</span>                    queue[0][rear] = xx;</div>
<div class="line"><span class="lineno">  462</span>                    queue[1][rear] = yy;</div>
<div class="line"><span class="lineno">  463</span>                    rear++;</div>
<div class="line"><span class="lineno">  464</span>                }</div>
<div class="line"><span class="lineno">  465</span>            }</div>
<div class="line"><span class="lineno">  466</span>        }</div>
<div class="line"><span class="lineno">  467</span>    }</div>
<div class="line"><span class="lineno">  468</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a70c40d30df6e3c879ceddd136452c303" name="a70c40d30df6e3c879ceddd136452c303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c40d30df6e3c879ceddd136452c303">&#9670;&#160;</a></span>flood_fill_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flood_fill_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *restrict&#160;</td>
          <td class="paramname"><em>codes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>queue</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses BFS algoritam to give each pixel in a closed contour unique color code Optimized version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input </td></tr>
    <tr><td class="paramname">x</td><td>position in image </td></tr>
    <tr><td class="paramname">y</td><td>position in image </td></tr>
    <tr><td class="paramname">color</td><td>current color code </td></tr>
    <tr><td class="paramname">codes</td><td>array of previous codet pixels </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00657">657</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  658</span>{</div>
<div class="line"><span class="lineno">  659</span>    <span class="keywordtype">int</span> i, j, xx, yy;</div>
<div class="line"><span class="lineno">  660</span>    <span class="keywordtype">int</span> currentX, currentY;</div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordtype">int</span> front = 0, rear = 0;</div>
<div class="line"><span class="lineno">  662</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  663</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height = image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  664</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixels = image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>    queue[0][rear] = x;</div>
<div class="line"><span class="lineno">  667</span>    queue[1][rear] = y;</div>
<div class="line"><span class="lineno">  668</span>    rear++;</div>
<div class="line"><span class="lineno">  669</span>    codes[y * width + x] = color;</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>    <span class="keywordflow">while</span> (front != rear) </div>
<div class="line"><span class="lineno">  672</span>    {</div>
<div class="line"><span class="lineno">  673</span>        currentX = queue[0][front];</div>
<div class="line"><span class="lineno">  674</span>        currentY = queue[1][front];</div>
<div class="line"><span class="lineno">  675</span>        front++;</div>
<div class="line"><span class="lineno">  676</span>        <span class="keywordflow">for</span> (i = -1; i &lt;= 1; i++) </div>
<div class="line"><span class="lineno">  677</span>        {</div>
<div class="line"><span class="lineno">  678</span>            <span class="keywordflow">for</span> (j = -1; j &lt;= 1; j++) </div>
<div class="line"><span class="lineno">  679</span>            {</div>
<div class="line"><span class="lineno">  680</span>                xx = currentX + i;</div>
<div class="line"><span class="lineno">  681</span>                yy = currentY + j;</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  683</span>                <span class="comment">/* ignore out of bound positions */</span></div>
<div class="line"><span class="lineno">  684</span>                <span class="keywordflow">if</span>  (expected_false(((xx &lt; 0) || (xx &gt;= width)) || ((yy &lt; 0) || (yy &gt;= height))))</div>
<div class="line"><span class="lineno">  685</span>                {</div>
<div class="line"><span class="lineno">  686</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  687</span>                }</div>
<div class="line"><span class="lineno">  688</span>                <span class="keywordflow">if</span> (expected_true((pixels[yy * width + xx] == 0u) &amp;&amp; (codes[yy * width + xx] == 0u)))</div>
<div class="line"><span class="lineno">  689</span>                {</div>
<div class="line"><span class="lineno">  690</span>                    codes[yy * width + xx] = color;</div>
<div class="line"><span class="lineno">  691</span>                    queue[0][rear] = xx;</div>
<div class="line"><span class="lineno">  692</span>                    queue[1][rear] = yy;</div>
<div class="line"><span class="lineno">  693</span>                    rear++;</div>
<div class="line"><span class="lineno">  694</span>                }</div>
<div class="line"><span class="lineno">  695</span>            }</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="line"><span class="lineno">  697</span>    }</div>
<div class="line"><span class="lineno">  698</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc54dfcab9444670f7bb09303c8fe6c5" name="abc54dfcab9444670f7bb09303c8fe6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc54dfcab9444670f7bb09303c8fe6c5">&#9670;&#160;</a></span>get_bytes_to_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int get_bytes_to_read </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>array</em>[4]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a 4 element array to a singel 4B value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array</td><td>input </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned int </dd></dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00133">133</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>{</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">return</span> (array[3] &lt;&lt; 24u) | (array[2] &lt;&lt; 16u) | (array[1] &lt;&lt; 8u) | array[0];</div>
<div class="line"><span class="lineno">  136</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a996ba27094be9e799f643fa79b21542d" name="a996ba27094be9e799f643fa79b21542d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a996ba27094be9e799f643fa79b21542d">&#9670;&#160;</a></span>get_bytes_to_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_bytes_to_write </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>array</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>whatTowrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a 4B value to an array of 4 elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array</td><td>output </td></tr>
    <tr><td class="paramname">whatTowrite</td><td>input </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00144">144</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  145</span>{</div>
<div class="line"><span class="lineno">  146</span>    array[0] = whatTowrite &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  147</span>    array[1] = (whatTowrite &gt;&gt; 8)  &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  148</span>    array[2] = (whatTowrite &gt;&gt; 16) &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  149</span>    array[3] = (whatTowrite &gt;&gt; 24) &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  150</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8aa8882ca4c1981931b8b4464c187cb8" name="a8aa8882ca4c1981931b8b4464c187cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa8882ca4c1981931b8b4464c187cb8">&#9670;&#160;</a></span>prep_for_writing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prep_for_writing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preps an image for writing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>edge or gray scale image </td></tr>
    <tr><td class="paramname">output</td><td>image ready for writing (pixel array need to be preallocated with size =&gt; width * height) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00106">106</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span>{</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> * input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> onePixel = 3u;</div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixelsI = input-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * restrict pixelsO = output-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>;</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">/* Initialize the output image */</span></div>
<div class="line"><span class="lineno">  115</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = input-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>;</div>
<div class="line"><span class="lineno">  116</span>    output-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = input-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>;</div>
<div class="line"><span class="lineno">  117</span>    output-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = onePixel;</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">for</span> (i = 0u; i &lt; size; i++)</div>
<div class="line"><span class="lineno">  120</span>     {</div>
<div class="line"><span class="lineno">  121</span>        pixelsO[i*onePixel] = pixelsI[i];</div>
<div class="line"><span class="lineno">  122</span>        pixelsO[i*onePixel +1u] =  pixelsI[i];</div>
<div class="line"><span class="lineno">  123</span>        pixelsO[i*onePixel +2u] =  pixelsI[i];</div>
<div class="line"><span class="lineno">  124</span>     }</div>
<div class="line"><span class="lineno">  125</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a71b65010c919b9fd61b32242593f3761" name="a71b65010c919b9fd61b32242593f3761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71b65010c919b9fd61b32242593f3761">&#9670;&#160;</a></span>read_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_image </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an .bmp format image and puts it to image variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>File name of the image </td></tr>
    <tr><td class="paramname">image</td><td>Read image (pixel array need to be preallocated) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int if 0 every thing is OK, if -1 something went wrong </dd></dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00038">38</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>{</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordtype">int</span> return_val = 0;</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> bitsPerPixel = 0u;</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataOffset = 0u;</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> paddedRowSize = 0u;</div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unpaddedRowSize = 0u;</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordtype">float</span> paddedRowSizeTMP;</div>
<div class="line"><span class="lineno">   47</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *currentRowPointer;</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> reader[4] = {0u};</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    FILE *inputFile = fopen(fileName, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> (inputFile != NULL)</div>
<div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        <span class="comment">/* Reading Pixel Data Offset */</span></div>
<div class="line"><span class="lineno">   55</span>        fseek(inputFile, <a class="code hl_define" href="image-utils_8h.html#a068a04c3357658a71c8cbd68de38a1d0">DATA_OFFSET_OFFSET</a>, SEEK_SET);</div>
<div class="line"><span class="lineno">   56</span>        fread(reader, 1u, 4u, inputFile);</div>
<div class="line"><span class="lineno">   57</span>        dataOffset = <a class="code hl_function" href="image-utils_8c.html#abc54dfcab9444670f7bb09303c8fe6c5">get_bytes_to_read</a>(reader);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>        <span class="comment">/* Reading Image Width */</span></div>
<div class="line"><span class="lineno">   60</span>        fseek(inputFile, <a class="code hl_define" href="image-utils_8h.html#a6a6dbe125418de8a9f11943d009ef9ae">WIDTH_OFFSET</a>, SEEK_SET);</div>
<div class="line"><span class="lineno">   61</span>        fread(reader, 1u, 4u, inputFile);</div>
<div class="line"><span class="lineno">   62</span>        image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> = <a class="code hl_function" href="image-utils_8c.html#abc54dfcab9444670f7bb09303c8fe6c5">get_bytes_to_read</a>(reader);</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>        <span class="comment">/* Reading Image Height */</span></div>
<div class="line"><span class="lineno">   65</span>        fseek(inputFile, <a class="code hl_define" href="image-utils_8h.html#abeaed8ebfced11028a9e1e4521a7a1bd">HEIGHT_OFFSET</a>, SEEK_SET);</div>
<div class="line"><span class="lineno">   66</span>        fread(reader, 1u, 4u, inputFile);</div>
<div class="line"><span class="lineno">   67</span>        image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> = <a class="code hl_function" href="image-utils_8c.html#abc54dfcab9444670f7bb09303c8fe6c5">get_bytes_to_read</a>(reader);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>        <span class="comment">/* Reading The number of bits per pixel */</span></div>
<div class="line"><span class="lineno">   70</span>        fseek(inputFile, <a class="code hl_define" href="image-utils_8h.html#a3f6e89debd1c384b4592a0df898dff56">BITS_PER_PIXEL_OFFSET</a>, SEEK_SET);</div>
<div class="line"><span class="lineno">   71</span>        fread(reader, 1u, 2u, inputFile);</div>
<div class="line"><span class="lineno">   72</span>        bitsPerPixel = (reader[1] &lt;&lt; 8u) | reader[0];</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>        image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> = ((<span class="keywordtype">unsigned</span> int)bitsPerPixel) / 8u;</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>        paddedRowSizeTMP = (4.0f * (float)ceil((<span class="keywordtype">float</span>)(image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>) / 4.0f));</div>
<div class="line"><span class="lineno">   77</span>        paddedRowSize = (<span class="keywordtype">unsigned</span> int)paddedRowSizeTMP * image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">   78</span>        unpaddedRowSize = (image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>)*(image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>);</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>        currentRowPointer = image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>+((image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>-1u)*unpaddedRowSize);</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">for</span> (i = 0u; i &lt; image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>; ++i)</div>
<div class="line"><span class="lineno">   83</span>        {</div>
<div class="line"><span class="lineno">   84</span>            fseek(inputFile, (i*paddedRowSize) + dataOffset, SEEK_SET);</div>
<div class="line"><span class="lineno">   85</span>            fread(currentRowPointer, 1u, unpaddedRowSize, inputFile);</div>
<div class="line"><span class="lineno">   86</span>            currentRowPointer -= unpaddedRowSize;</div>
<div class="line"><span class="lineno">   87</span>        }</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        fclose(inputFile);</div>
<div class="line"><span class="lineno">   90</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   91</span>    {</div>
<div class="line"><span class="lineno">   92</span>        <span class="comment">/* Something went wrong */</span></div>
<div class="line"><span class="lineno">   93</span>        return_val = -1;</div>
<div class="line"><span class="lineno">   94</span>    }</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   97</span>}</div>
<div class="ttc" id="aimage-utils_8c_html_abc54dfcab9444670f7bb09303c8fe6c5"><div class="ttname"><a href="image-utils_8c.html#abc54dfcab9444670f7bb09303c8fe6c5">get_bytes_to_read</a></div><div class="ttdeci">unsigned int get_bytes_to_read(unsigned char array[4])</div><div class="ttdoc">Converts a 4 element array to a singel 4B value.</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8c_source.html#l00133">image-utils.c:133</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a068a04c3357658a71c8cbd68de38a1d0"><div class="ttname"><a href="image-utils_8h.html#a068a04c3357658a71c8cbd68de38a1d0">DATA_OFFSET_OFFSET</a></div><div class="ttdeci">#define DATA_OFFSET_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00020">image-utils.h:20</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a3f6e89debd1c384b4592a0df898dff56"><div class="ttname"><a href="image-utils_8h.html#a3f6e89debd1c384b4592a0df898dff56">BITS_PER_PIXEL_OFFSET</a></div><div class="ttdeci">#define BITS_PER_PIXEL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00023">image-utils.h:23</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a6a6dbe125418de8a9f11943d009ef9ae"><div class="ttname"><a href="image-utils_8h.html#a6a6dbe125418de8a9f11943d009ef9ae">WIDTH_OFFSET</a></div><div class="ttdeci">#define WIDTH_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00021">image-utils.h:21</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_abeaed8ebfced11028a9e1e4521a7a1bd"><div class="ttname"><a href="image-utils_8h.html#abeaed8ebfced11028a9e1e4521a7a1bd">HEIGHT_OFFSET</a></div><div class="ttdeci">#define HEIGHT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00022">image-utils.h:22</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1b01a03a98890cde4a25eae51095cc5" name="ab1b01a03a98890cde4a25eae51095cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b01a03a98890cde4a25eae51095cc5">&#9670;&#160;</a></span>write_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_image </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image-utils_8h.html#ae73648d40b3f0de75922469496162ca7">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the image in a .bmp format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>File name of the image </td></tr>
    <tr><td class="paramname">image</td><td>to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int if 0 evrery thing is OK, if -1 something whent wrong </dd></dl>

<p class="definition">Definition at line <a class="el" href="image-utils_8c_source.html#l00159">159</a> of file <a class="el" href="image-utils_8c_source.html">image-utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>{</div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordtype">int</span> return_val = 0;</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> writer[4] = {0u};</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>    <span class="comment">/* File info */</span></div>
<div class="line"><span class="lineno">  166</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> BM[] = <span class="stringliteral">&quot;BM&quot;</span>;</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordtype">float</span> paddedRowSizeTMP = (4.0f * (float)ceil((<span class="keywordtype">float</span>) image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>/4.0f));</div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> paddedRowSize = (<span class="keywordtype">unsigned</span> int) paddedRowSizeTMP * image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fileSize = paddedRowSize*image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> + <a class="code hl_define" href="image-utils_8h.html#a49999be01380f41cc0d0f1f1406fb277">HEADER_SIZE</a> + <a class="code hl_define" href="image-utils_8h.html#a021879045d7ce866f25971a7fa70497e">INFO_HEADER_SIZE</a>;</div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> reserved = 0x0000u;</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataOffset = <a class="code hl_define" href="image-utils_8h.html#a49999be01380f41cc0d0f1f1406fb277">HEADER_SIZE</a>+<a class="code hl_define" href="image-utils_8h.html#a021879045d7ce866f25971a7fa70497e">INFO_HEADER_SIZE</a>;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="comment">/* Header info */</span></div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> infoHeaderSize = <a class="code hl_define" href="image-utils_8h.html#a021879045d7ce866f25971a7fa70497e">INFO_HEADER_SIZE</a>;</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> planes = 1u; <span class="comment">/* always 1 */</span></div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bitsPerPixel = image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a> * 8u;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> compression = <a class="code hl_define" href="image-utils_8h.html#ae007f7efcb649937cd1ef4e3f4e8e94e">NO_COMPRESION</a>;</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">/* Image properties */</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imageSize = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> * image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> * image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resolutionX = 11811u; <span class="comment">/* 300 dpi */</span></div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resolutionY = 11811u; <span class="comment">/* 300 dpi */</span></div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colorsUsed = <a class="code hl_define" href="image-utils_8h.html#a9d3c0470019a469654351bbf889024ca">MAX_NUMBER_OF_COLORS</a>;</div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> importantColors = <a class="code hl_define" href="image-utils_8h.html#acc41e09c63aae7f85191a7fe0e656f1b">ALL_COLORS_REQUIRED</a>;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unpaddedRowSize = image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a> * image-&gt;<a class="code hl_variable" href="structimg.html#ad7ce9c2bd24f9bdd12dd7b4219c53e37">bytesPerPixel</a>;</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    FILE *outputFile = fopen(fileName, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">if</span> (outputFile != NULL) </div>
<div class="line"><span class="lineno">  192</span>    {</div>
<div class="line"><span class="lineno">  193</span>        <span class="comment">/* Write file info */</span></div>
<div class="line"><span class="lineno">  194</span>        fwrite(&amp;BM[0], 1u, 1u, outputFile);</div>
<div class="line"><span class="lineno">  195</span>        fwrite(&amp;BM[1], 1u, 1u, outputFile);</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, fileSize);</div>
<div class="line"><span class="lineno">  198</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, reserved);</div>
<div class="line"><span class="lineno">  201</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, dataOffset);</div>
<div class="line"><span class="lineno">  204</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>        <span class="comment">/* Write header info */</span></div>
<div class="line"><span class="lineno">  207</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, infoHeaderSize);</div>
<div class="line"><span class="lineno">  208</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, image-&gt;<a class="code hl_variable" href="structimg.html#aca34d28e3d8bcbcadb8edb4e3af24f8c">width</a>);</div>
<div class="line"><span class="lineno">  211</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>);</div>
<div class="line"><span class="lineno">  214</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>        writer[0] = planes &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  217</span>        writer[1] = (planes &gt;&gt; 8) &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  218</span>        fwrite(writer, 1u, 2u, outputFile);</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>        writer[0] = bitsPerPixel &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  221</span>        writer[1] = (bitsPerPixel &gt;&gt; 8) &amp; 0xFFu;</div>
<div class="line"><span class="lineno">  222</span>        fwrite(writer, 1u, 2u, outputFile);</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>        <span class="comment">/* Write compression */</span></div>
<div class="line"><span class="lineno">  225</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, compression);</div>
<div class="line"><span class="lineno">  226</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>        <span class="comment">/* Write image size (in bytes) */</span></div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, imageSize);</div>
<div class="line"><span class="lineno">  230</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, resolutionX);</div>
<div class="line"><span class="lineno">  233</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, resolutionY);</div>
<div class="line"><span class="lineno">  236</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, colorsUsed);</div>
<div class="line"><span class="lineno">  239</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>        <a class="code hl_function" href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a>(writer, importantColors);</div>
<div class="line"><span class="lineno">  242</span>        fwrite(writer, 1u, 4u, outputFile);</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>        <span class="comment">/* Write pixels to file */</span></div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">for</span> (i = 0u; i &lt; image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a>; ++i)</div>
<div class="line"><span class="lineno">  246</span>        {</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelOffset = ((image-&gt;<a class="code hl_variable" href="structimg.html#ab2e78c61905b4419fcc7b4cfc500fe85">height</a> - i) - 1u)*unpaddedRowSize;</div>
<div class="line"><span class="lineno">  248</span>                fwrite(&amp;image-&gt;<a class="code hl_variable" href="structimg.html#abc151ccc17d59b9d84a700b3855d4df0">pixels</a>[pixelOffset], 1u, paddedRowSize, outputFile);</div>
<div class="line"><span class="lineno">  249</span>        }</div>
<div class="line"><span class="lineno">  250</span>    </div>
<div class="line"><span class="lineno">  251</span>        fclose(outputFile);</div>
<div class="line"><span class="lineno">  252</span>    }</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">else</span> { </div>
<div class="line"><span class="lineno">  254</span>        <span class="comment">/* Something went wrong*/</span></div>
<div class="line"><span class="lineno">  255</span>        return_val = -1;</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">return</span> return_val;</div>
<div class="line"><span class="lineno">  259</span>}</div>
<div class="ttc" id="aimage-utils_8c_html_a996ba27094be9e799f643fa79b21542d"><div class="ttname"><a href="image-utils_8c.html#a996ba27094be9e799f643fa79b21542d">get_bytes_to_write</a></div><div class="ttdeci">void get_bytes_to_write(unsigned char array[4], unsigned int whatTowrite)</div><div class="ttdoc">Converts a 4B value to an array of 4 elements.</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8c_source.html#l00144">image-utils.c:144</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a021879045d7ce866f25971a7fa70497e"><div class="ttname"><a href="image-utils_8h.html#a021879045d7ce866f25971a7fa70497e">INFO_HEADER_SIZE</a></div><div class="ttdeci">#define INFO_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00025">image-utils.h:25</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a49999be01380f41cc0d0f1f1406fb277"><div class="ttname"><a href="image-utils_8h.html#a49999be01380f41cc0d0f1f1406fb277">HEADER_SIZE</a></div><div class="ttdeci">#define HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00024">image-utils.h:24</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_a9d3c0470019a469654351bbf889024ca"><div class="ttname"><a href="image-utils_8h.html#a9d3c0470019a469654351bbf889024ca">MAX_NUMBER_OF_COLORS</a></div><div class="ttdeci">#define MAX_NUMBER_OF_COLORS</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00027">image-utils.h:27</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_acc41e09c63aae7f85191a7fe0e656f1b"><div class="ttname"><a href="image-utils_8h.html#acc41e09c63aae7f85191a7fe0e656f1b">ALL_COLORS_REQUIRED</a></div><div class="ttdeci">#define ALL_COLORS_REQUIRED</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00028">image-utils.h:28</a></div></div>
<div class="ttc" id="aimage-utils_8h_html_ae007f7efcb649937cd1ef4e3f4e8e94e"><div class="ttname"><a href="image-utils_8h.html#ae007f7efcb649937cd1ef4e3f4e8e94e">NO_COMPRESION</a></div><div class="ttdeci">#define NO_COMPRESION</div><div class="ttdef"><b>Definition:</b> <a href="image-utils_8h_source.html#l00026">image-utils.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
